<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>New Year Surprise</title>

<style>
/* ---------- GLOBAL ---------- */
* { box-sizing: border-box; }
body {
  margin: 0;
  height: 100vh;
  background:
    radial-gradient(circle at top left, #2b0a3d, #000),
    repeating-linear-gradient(0deg, rgba(255,255,255,.03) 0 1px, transparent 1px 80px),
    repeating-linear-gradient(90deg, rgba(255,255,255,.03) 0 1px, transparent 1px 80px);
  font-family: system-ui, sans-serif;
  color: white;
  overflow: hidden;
}

.center {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  padding: 20px;
  box-sizing: border-box;
}

/* ---------- HEART SECTION ---------- */
.intro {
  width: 420px;
  padding: 40px;
  border-radius: 24px;
  background: rgba(255,255,255,.06);
  backdrop-filter: blur(20px);
  text-align: center;
  transition: opacity .6s, transform .6s;
}

.intro.hide {
  opacity: 0;
  transform: scale(.9);
  pointer-events: none;
}

.title {
  font-size: 28px;
  color: #ff8fcf;
}

.sub {
  font-size: 14px;
  color: #bbb;
  margin: 16px 0;
}

.heart-wrap {
  width: 120px;
  height: 120px;
  margin: 20px auto;
  position: relative;
  cursor: pointer;
  user-select: none;
  -webkit-user-select: none;
  overflow: hidden;
}

.heart {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 42px;
  z-index: 2;
}

/* Progress ring for hold progress - single circle */
.progress-ring {
  position: absolute;
  inset: 0;
  opacity: 0;
  transition: opacity 0.3s ease;
  transform: rotate(-90deg);
  z-index: 1;
  width: 100%;
  height: 100%;
  overflow: visible;
}

.heart-wrap.holding .progress-ring {
  opacity: 1;
}

.progress-ring circle {
  fill: none;
  stroke: #ff8fcf;
  stroke-width: 4;
  stroke-linecap: round;
  stroke-dasharray: 283;
  stroke-dashoffset: 283;
  transition: stroke-dashoffset 0.1s linear;
  filter: drop-shadow(0 0 4px rgba(255, 143, 207, 0.5));
}

/* Spinner animation when loading completes */
.heart-wrap.loading .progress-ring {
  opacity: 1;
}

.heart-wrap.loading .progress-ring circle {
  stroke-dasharray: 70 213;
  stroke-dashoffset: 0;
  animation: spinProgress 1.2s linear infinite;
}

@keyframes spinProgress {
  to {
    stroke-dashoffset: -283;
  }
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* ---------- CARD SECTION ---------- */
.screen2 {
  opacity: 0;
  pointer-events: none;
  transition: opacity .6s;
  overflow: hidden;
}

.screen2.show {
  opacity: 1;
  pointer-events: auto;
}

.heading {
  position: absolute;
  top: 60px;
  width: 100%;
  text-align: center;
}

.heading h1 {
  margin: 0;
  font-size: 36px;
}

.heading p {
  margin-top: 6px;
  color: #aaa;
}

/* CARD BOX */
.card-box {
  width: 360px;
  height: 360px;
  border-radius: 24px;
  background: rgba(255,255,255,.06);
  backdrop-filter: blur(18px);
  position: relative;
  overflow: hidden;
  margin: 0 auto;
}

/* CARDS */
.card {
  position: absolute;
  width: 120px;
  height: 160px;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  color: #444;
  cursor: grab;
  transition: transform .3s ease, opacity .4s ease, box-shadow .3s ease;
  user-select: none;
  touch-action: none;
}

.card:active {
  cursor: grabbing;
}

.card.dragging {
  z-index: 100;
  transform: scale(1.1);
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  transition: transform .1s ease, box-shadow .1s ease;
}

/* WAITING POSITIONS - Evenly aligned around center */
.work {
  background: #ffd7a8;
  transform: translate(40px, 200px) rotate(-5deg);
}

.stress {
  background: #fff39a;
  transform: translate(200px, 40px) rotate(5deg);
}

.distance {
  background: #cfe3ff;
  transform: translate(40px, 40px) rotate(-5deg);
}

.bad {
  background: #ffd6e8;
  transform: translate(200px, 200px) rotate(5deg);
}

/* ACTIVE CARD - removed, using drag instead */
/* GIFT ICON ‚Äì CENTER, BEHIND CARDS */
.gift {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 96px;
  height: 96px;
  transform: translate(-50%, -50%);
  border-radius: 20px;
  background: linear-gradient(to bottom right, #fb7185, #ec4899);
  box-shadow: 0 0 30px rgba(244,63,94,0.35);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1;        /* üëà behind cards */
  cursor: pointer;
}

/* cards must be above gift */
.card {
  z-index: 2;
}


/* Initial card positions stored in data attributes */

/* ---------- PARTY POPUP & GOLDEN TICKET ---------- */
.popup-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(10px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.5s ease;
}

.popup-overlay.show {
  opacity: 1;
  pointer-events: auto;
}

.popup-container {
  position: relative;
  width: 100%;
  max-width: 500px;
  padding: 40px 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Confetti Container */
.confetti-popup {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}

.confetti-piece {
  position: absolute;
  width: 10px;
  height: 10px;
  background: #ffd700;
  animation: confettiFall 3s linear forwards;
}

.confetti-piece:nth-child(2n) { background: #ff6b6b; }
.confetti-piece:nth-child(3n) { background: #4ecdc4; }
.confetti-piece:nth-child(4n) { background: #ffe66d; }
.confetti-piece:nth-child(5n) { background: #a8e6cf; }

@keyframes confettiFall {
  0% {
    transform: translateY(-100vh) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0;
  }
}

/* Golden Ticket */
.golden-ticket {
  position: relative;
  width: 100%;
  max-width: 420px;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  border: 3px solid #ffd700;
  border-radius: 24px;
  padding: 40px 30px;
  box-shadow: 
    0 0 40px rgba(255, 215, 0, 0.4),
    0 0 80px rgba(255, 215, 0, 0.2),
    inset 0 0 20px rgba(255, 215, 0, 0.1);
  transform: rotate(-2deg) scale(0.9);
  animation: ticketAppear 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  text-align: center;
}

@keyframes ticketAppear {
  0% {
    transform: rotate(-10deg) scale(0.5);
    opacity: 0;
  }
  100% {
    transform: rotate(-2deg) scale(1);
    opacity: 1;
  }
}

.ticket-icon {
  width: 60px;
  height: 60px;
  margin: 0 auto 20px;
  background: linear-gradient(135deg, #ffd700, #ffed4e);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 15px rgba(255, 215, 0, 0.5);
}

.ticket-icon svg {
  width: 35px;
  height: 35px;
  stroke: #1a1a2e;
  stroke-width: 2.5;
}

.ticket-title {
  font-size: 42px;
  font-weight: 900;
  background: linear-gradient(135deg, #ffd700, #ffed4e, #ffd700);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin: 0 0 20px;
  font-family: 'Brush Script MT', 'Lucida Handwriting', cursive;
  letter-spacing: 2px;
  text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
}

.perforated-line {
  width: 100%;
  height: 2px;
  margin: 20px 0;
  background: repeating-linear-gradient(
    to right,
    rgba(255, 255, 255, 0.3) 0px,
    rgba(255, 255, 255, 0.3) 8px,
    transparent 8px,
    transparent 16px
  );
}

.ticket-validity {
  font-size: 14px;
  color: #e0e0e0;
  margin: 20px 0;
  font-weight: 300;
  letter-spacing: 1px;
}

.ticket-quote {
  font-size: 28px;
  font-style: italic;
  background: linear-gradient(135deg, #ffd700, #ffed4e);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin: 30px 0;
  font-family: 'Brush Script MT', 'Lucida Handwriting', cursive;
  font-weight: 600;
}

.ticket-expiration {
  font-size: 12px;
  color: #b0b0b0;
  margin-top: 20px;
  font-weight: 300;
}

.claim-button {
  margin-top: 30px;
  padding: 16px 40px;
  background: linear-gradient(135deg, #ffd700, #ffed4e);
  border: none;
  border-radius: 50px;
  color: #1a1a2e;
  font-size: 18px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 20px rgba(255, 215, 0, 0.4);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.claim-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 30px rgba(255, 215, 0, 0.6);
}

.claim-button:active {
  transform: translateY(0);
}

.close-popup {
  position: absolute;
  top: 20px;
  right: 20px;
  width: 40px;
  height: 40px;
  background: rgba(255, 255, 255, 0.1);
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  color: white;
  font-size: 24px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  z-index: 1001;
}

.close-popup:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: rotate(90deg);
}

/* ---------- MOMENTS GALLERY SCREEN ---------- */
.moments-screen {
  position: fixed;
  inset: 0;
  background:
    radial-gradient(circle at top left, #2b0a3d, #000),
    repeating-linear-gradient(0deg, rgba(255,255,255,.03) 0 1px, transparent 1px 80px),
    repeating-linear-gradient(90deg, rgba(255,255,255,.03) 0 1px, transparent 1px 80px);
  z-index: 2000;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.6s ease;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
}

.moments-screen.show {
  opacity: 1;
  pointer-events: auto;
}

.moments-title {
  font-size: clamp(24px, 5vw, 36px);
  color: white;
  font-family: 'Brush Script MT', 'Lucida Handwriting', cursive;
  margin-bottom: 40px;
  text-align: center;
  font-weight: 400;
  letter-spacing: 2px;
}

.moments-container {
  position: relative;
  width: 100%;
  max-width: 500px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.polaroid-wrapper {
  position: relative;
  width: 100%;
  max-width: 400px;
  cursor: pointer;
  transition: transform 0.3s ease;
}

.polaroid-wrapper:hover {
  transform: scale(1.02);
}

.polaroid-frame {
  position: relative;
  background: white;
  padding: 20px 20px 80px;
  border-radius: 4px;
  box-shadow: 
    0 10px 40px rgba(0, 0, 0, 0.3),
    0 0 0 8px white,
    0 0 0 10px rgba(0, 0, 0, 0.1);
  transform: rotate(2deg);
  transition: transform 0.3s ease;
}

.polaroid-frame.active {
  transform: rotate(0deg) scale(1.05);
  z-index: 10;
}

.polaroid-frame.behind {
  position: absolute;
  top: 20px;
  left: 20px;
  transform: rotate(-2deg) scale(0.95);
  opacity: 0.7;
  z-index: 1;
}

.polaroid-image {
  width: 100%;
  height: auto;
  border-radius: 2px;
  display: block;
  object-fit: cover;
  aspect-ratio: 4/3;
}

.polaroid-video {
  width: 100%;
  height: auto;
  border-radius: 2px;
  display: block;
  aspect-ratio: 4/3;
}

.polaroid-caption {
  position: absolute;
  bottom: 20px;
  left: 20px;
  right: 20px;
  height: 50px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 4px;
}

.caption-line {
  height: 3px;
  background: linear-gradient(90deg, #ffb3d9, #ff99cc, #ffb3d9);
  border-radius: 2px;
  opacity: 0.6;
}

.caption-line:nth-child(1) { width: 100%; }
.caption-line:nth-child(2) { width: 70%; }
.caption-line:nth-child(3) { width: 50%; }

.moments-instruction {
  margin-top: 40px;
  color: rgba(255, 255, 255, 0.8);
  font-size: 16px;
  text-align: center;
  font-weight: 300;
  letter-spacing: 1px;
  animation: pulse 2s ease-in-out infinite;
}

.moments-counter {
  position: absolute;
  top: 20px;
  right: 20px;
  color: rgba(255, 255, 255, 0.6);
  font-size: 14px;
  font-weight: 300;
}

.moments-close {
  position: absolute;
  top: 20px;
  left: 20px;
  width: 40px;
  height: 40px;
  background: rgba(255, 255, 255, 0.1);
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  color: white;
  font-size: 24px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  z-index: 100;
}

.moments-close:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: rotate(90deg);
}

@keyframes pulse {
  0%, 100% { opacity: 0.8; }
  50% { opacity: 1; }
}

.moments-fade-enter {
  animation: fadeInSlide 0.5s ease;
}

.moments-fade-exit {
  animation: fadeOutSlide 0.5s ease;
}

@keyframes fadeInSlide {
  from {
    opacity: 0;
    transform: translateX(50px) scale(0.9);
  }
  to {
    opacity: 1;
    transform: translateX(0) scale(1);
  }
}

@keyframes fadeOutSlide {
  from {
    opacity: 1;
    transform: translateX(0) scale(1);
  }
  to {
    opacity: 0;
    transform: translateX(-50px) scale(0.9);
  }
}

/* ---------- GREETING CARD SCREEN ---------- */
.greeting-card-screen {
  position: fixed;
  inset: 0;
  background:
    radial-gradient(circle at top left, #2b0a3d, #000),
    repeating-linear-gradient(0deg, rgba(255,255,255,.03) 0 1px, transparent 1px 80px),
    repeating-linear-gradient(90deg, rgba(255,255,255,.03) 0 1px, transparent 1px 80px);
  z-index: 3000;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.6s ease;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 0;
}

.greeting-card-screen.show {
  opacity: 1;
  pointer-events: auto;
}

.greeting-title {
  display: none;
}

.greeting-instruction {
  display: none;
}

.greeting-card-container {
  position: relative;
  width: 90%;
  max-width: 800px;
  height: 80vh;
  max-height: 600px;
  perspective: 1000px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto;
}

.greeting-card {
  position: relative;
  display: flex;
  height: 100%;
  margin: 0 auto;
  transform-style: preserve-3d;
  transition: transform 0.8s ease;
}

.greeting-card.flipped {
  transform: rotateY(180deg);
}

.card-front,
.card-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border-radius: 0;
  box-shadow: none;
}

.card-front {
  display: flex;
  align-items: center;
  justify-content: center;
  border: 6px solid #3b82f6;
  overflow: hidden;
  position: relative;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
}

.card-front-image {
  width: 100%;
  height: 70%;
  object-fit: cover;
  display: block;
}

.card-back {
  background: linear-gradient(135deg, #fff8f0 0%, #f5f5dc 100%);
  transform: rotateY(180deg);
  padding: 50px;
  overflow-y: auto;
  border: 6px solid #3b82f6;
  width: 100%;
  height: 100%;
  border-radius: 0;
  box-sizing: border-box;
  display: flex;
  align-items: flex-start;
  justify-content: flex-start;
}

.card-front-title {
  font-size: 48px;
  font-weight: 900;
  color: #8b4513;
  margin-bottom: 10px;
  font-family: 'Brush Script MT', 'Lucida Handwriting', cursive;
}

.card-front-year {
  font-size: 72px;
  font-weight: 900;
  color: #ff8c42;
  margin-bottom: 20px;
  font-family: 'Brush Script MT', 'Lucida Handwriting', cursive;
}

.card-decorations {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 20px;
  flex-wrap: wrap;
}

.star {
  width: 20px;
  height: 20px;
  background: #ffd700;
  clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
  opacity: 0.8;
}

.dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #ff8c42;
}

.card-message {
  font-size: 18px;
  line-height: 1;
  color: #323232;
  font-family: 'Poppins', sans-serif;
  text-align: left;
  font-weight: 400;
  width: 100%;
  max-width: 100%;
  letter-spacing: 0.2px;
  margin: 0;
  padding: 0;
}

.card-message strong {
  color: #8b4513;
  font-weight: 600;
}

.card-close {
  position: absolute;
  top: 20px;
  right: 20px;
  width: 40px;
  height: 40px;
  background: rgba(255, 255, 255, 0.1);
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  color: white;
  font-size: 24px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  z-index: 100;
}

.card-close:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: rotate(90deg);
}

/* ---------- MOBILE RESPONSIVE STYLES ---------- */
@media screen and (max-width: 768px) {
  /* Heart Screen */
  .intro {
    width: 90%;
    max-width: 360px;
    padding: 30px 20px;
  }

  .title {
    font-size: 24px;
  }

  .sub {
    font-size: 13px;
  }

  .heart-wrap {
    width: 100px;
    height: 100px;
    margin: 15px auto;
  }

  .heart {
    font-size: 36px;
  }

  .progress-ring {
    width: 100px;
    height: 100px;
  }

  .progress-ring circle {
    stroke-width: 3;
    cx: 50;
    cy: 50;
    r: 40;
  }

  /* Card Screen */
  .heading {
    top: 30px;
    padding: 0 20px;
  }

  .heading h1 {
    font-size: 24px;
  }

  .heading p {
    font-size: 14px;
  }

  .card-box {
    width: 280px;
    height: 280px;
    max-width: calc(100vw - 40px);
    max-height: calc(100vh - 200px);
    overflow: hidden;
    margin: 20px auto 0;
  }

  .card {
    width: 80px;
    height: 110px;
    font-size: 13px;
  }

  /* Card positions for mobile - evenly aligned (handled by JS, but kept for CSS fallback) */
  .work {
    transform: translate(25px, 140px) rotate(-5deg);
  }

  .stress {
    transform: translate(155px, 25px) rotate(5deg);
  }

  .distance {
    transform: translate(25px, 25px) rotate(-5deg);
  }

  .bad {
    transform: translate(155px, 140px) rotate(5deg);
  }

  .gift {
    width: 72px;
    height: 72px;
  }

  .gift svg {
    width: 32px;
    height: 32px;
  }

  /* Popup & Ticket */
  .popup-container {
    padding: 20px 15px;
  }

  .golden-ticket {
    max-width: 90%;
    padding: 30px 20px;
  }

  .ticket-icon {
    width: 50px;
    height: 50px;
    margin-bottom: 15px;
  }

  .ticket-icon svg {
    width: 28px;
    height: 28px;
  }

  .ticket-title {
    font-size: 32px;
    margin-bottom: 15px;
  }

  .ticket-quote {
    font-size: 22px;
    margin: 20px 0;
  }

  .ticket-validity {
    font-size: 12px;
  }

  .claim-button {
    padding: 14px 30px;
    font-size: 16px;
    margin-top: 20px;
  }

  /* Moments Screen */
  .moments-screen {
    padding: 20px 15px;
  }

  .moments-title {
    font-size: 22px;
    margin-bottom: 30px;
  }

  .moments-container {
    max-width: 100%;
  }

  .polaroid-wrapper {
    max-width: 100%;
  }

  .polaroid-frame {
    padding: 15px 15px 60px;
  }

  .moments-instruction {
    font-size: 14px;
    margin-top: 30px;
  }

  .moments-counter {
    top: 15px;
    right: 15px;
    font-size: 12px;
  }

  .moments-close {
    top: 15px;
    left: 15px;
    width: 35px;
    height: 35px;
    font-size: 20px;
  }

  /* Greeting Card */
  .greeting-card-container {
    width: 95%;
    max-width: 100%;
    height: 85vh;
    max-height: 85vh;
  }

  .card-front {
    border-width: 4px;
  }

  .card-back {
    padding: 30px 20px;
    border-width: 4px;
  }

  .card-message {
    font-size: 18px;
    line-height: 1.8;
  }

  .card-close {
    top: 15px;
    right: 15px;
    width: 35px;
    height: 35px;
    font-size: 20px;
  }
}

@media screen and (max-width: 480px) {
  /* Extra small devices */
  .intro {
    width: 95%;
    padding: 25px 15px;
  }

  .title {
    font-size: 20px;
  }

  .sub {
    font-size: 12px;
  }

  .heart-wrap {
    width: 90px;
    height: 90px;
  }

  .heart {
    font-size: 32px;
  }

  .progress-ring {
    width: 90px;
    height: 90px;
  }

  .progress-ring circle {
    cx: 45;
    cy: 45;
    r: 35;
  }

  .heading h1 {
    font-size: 20px;
  }

  .heading p {
    font-size: 12px;
  }

  .card-box {
    width: 240px;
    height: 240px;
    max-width: calc(100vw - 30px);
    max-height: calc(100vh - 180px);
    overflow: hidden;
    margin: 15px auto 0;
  }

  .card {
    width: 70px;
    height: 95px;
    font-size: 11px;
  }

  .work {
    transform: translate(20px, 120px) rotate(-5deg);
  }

  .stress {
    transform: translate(130px, 20px) rotate(5deg);
  }

  .distance {
    transform: translate(20px, 20px) rotate(-5deg);
  }

  .bad {
    transform: translate(130px, 120px) rotate(5deg);
  }

  .gift {
    width: 60px;
    height: 60px;
  }

  .gift svg {
    width: 28px;
    height: 28px;
  }

  .golden-ticket {
    padding: 25px 15px;
  }

  .ticket-title {
    font-size: 28px;
  }

  .ticket-quote {
    font-size: 18px;
  }

  .claim-button {
    padding: 12px 25px;
    font-size: 14px;
  }

  .moments-title {
    font-size: 20px;
  }

  .polaroid-frame {
    padding: 12px 12px 50px;
  }

  .greeting-card-container {
    width: 98%;
    height: 90vh;
    max-height: 90vh;
  }

  .card-back {
    padding: 25px 15px;
  }

  .card-message {
    font-size: 16px;
    line-height: 1.6;
  }
}
</style>
</head>

<body>

<!-- HEART SCREEN -->
<div class="center">
  <div class="intro" id="intro">
    <div class="title">A little surprise for you</div>
    <div class="sub">Before this year begins</div>

    <div class="heart-wrap" id="heart">
      <svg class="progress-ring" width="120" height="120">
        <circle cx="60" cy="60" r="45" id="progressCircle"></circle>
      </svg>
      <div class="heart">‚ù§Ô∏è</div>
    </div>

    <div class="sub">Tap and hold the heart</div>
  </div>
</div>

<!-- CARD SCREEN -->
<div class="center screen2" id="screen2">
  <div class="heading">
    <h1>Something is waiting for you</h1>
    <p>Move the little distractions aside</p>
  </div>

<div class="card-box">

  <!-- GIFT ICON (BEHIND CARDS) -->
  <div class="gift" id="gift">
    <svg xmlns="http://www.w3.org/2000/svg"
      width="40" height="40" viewBox="0 0 24 24"
      fill="none" stroke="white" stroke-width="2"
      stroke-linecap="round" stroke-linejoin="round"
      class="lucide lucide-gift">
      <rect x="3" y="8" width="18" height="4" rx="1"></rect>
      <path d="M12 8v13"></path>
      <path d="M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"></path>
      <path d="M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5"></path>
    </svg>
  </div>

  <!-- CARDS -->
  <div class="card work" data-type="work">Work</div>
  <div class="card stress" data-type="stress">Stress</div>
  <div class="card distance" data-type="distance">Distance</div>
  <div class="card bad" data-type="bad">Bad Days</div>

</div>

</div>

<!-- MOMENTS GALLERY SCREEN -->
<div class="moments-screen" id="momentsScreen">
  <div class="moments-close" id="momentsClose">√ó</div>
  <div class="moments-counter" id="momentsCounter">1 / 1</div>
  <h2 class="moments-title">Some moments from this year</h2>
  
  <div class="moments-container">
    <div class="polaroid-wrapper" id="polaroidWrapper">
      <div class="polaroid-frame" id="currentPolaroid">
        <!-- Photo or video will be inserted here -->
        <div class="polaroid-caption">
          <div class="caption-line"></div>
          <div class="caption-line"></div>
          <div class="caption-line"></div>
        </div>
      </div>
    </div>
  </div>
  
  <p class="moments-instruction">Tap the photo to continue</p>
</div>

<!-- GREETING CARD SCREEN -->
<div class="greeting-card-screen" id="greetingCardScreen">
  <div class="card-close" id="cardClose">√ó</div>
  <h2 class="greeting-title" id="greetingTitle">For my Cutiepie :)</h2>
  <p class="greeting-instruction">Tap the card to read</p>
  
  <div class="greeting-card-container">
    <div class="greeting-card" id="greetingCard">
      <!-- Card Front -->
      <div class="card-front">
        <img src="https://ik.imagekit.io/i2yzb4amqb/cover.webp" alt="New Year Card" class="card-front-image">
      </div>
      
      <!-- Card Back (Message) -->
      <div class="card-back">
        <div class="card-message" id="cardMessage">
          <!-- Your message will go here - Edit this content -->
          Dear Friends,

          As 2025 comes to an end, I just wanted to pause and write this letter for all of you ‚Äî for the memories we created, the moments we shared, and the journey we walked together.
          
          This year wasn‚Äôt easy for any of us. There were ups and downs in every single life, but somehow, together, we made it meaningful. It all started with our first trip in Uma‚Äôs car ‚Äî the excitement, the drive, the laughs, and those Viratta bar moments that still make me smile. That trip itself set the tone for a year full of memories.
          
          From meeting after long days, sharing happiness, laughing during tea time at the Sendhoor shop, to those simple afternoon lunches while travelling ‚Äî every small moment slowly turned into something special I‚Äôll always carry.
          
          I still smile thinking about how we almost finished an entire restaurant in HSR just to satisfy our hunger and happiness. Those field trips, group trips, and especially the journey to Shivamuthu Falls and the beautiful Tibetan Village ‚Äî those were not just trips, they were memories written deep in our hearts.
          
          Faheem leaving was a heartbreak for me, and it changed something inside. But life moved on, and once again, we created new memories ‚Äî reminding me that nothing stays broken forever. Everyone was fighting their own silent battles, facing their own struggles, yet we stood together when it mattered.
          
          Uma, my girlfriend, truly became one of the gems of this gang ‚Äî always maintaining balance, acting as a bridge, holding things together when needed. That itself means more to me than words can explain.
          
          Our last trip to Gokarna had its own ups and downs, but the drive, the places, the moments ‚Äî I enjoyed every bit of it. I genuinely hope you all did too.
          
          As January 31 approaches, things feel a little more emotional for me. Two people moving away, situations changing ‚Äî but I‚Äôve learned something important this year:
          Whatever happens, happens for a reason.
          When something goes wrong, it stops us only to guide us toward the right path. We can‚Äôt control everything, and that‚Äôs okay. Life has to move on ‚Äî and it always does.
          
          I truly hope that even after Pickcel, the joy, the bonding, and the happiness among us continues. I believe it will.
          
          Next year, I promise myself to open my heart and mind even more ‚Äî to grow, to succeed, to enjoy life more freely, and to create even crazier memories with all of you. More laughter, more fun, and yes‚Ä¶ one international trip is already pending üòâ
          Let‚Äôs sign that contract and make it happen next year ‚Äî more smiles, more joy, and more stories to tell.
          
          This year, you people became the best gang I‚Äôve ever met. No matter if you avoid me, misunderstand me, or even hate me someday ‚Äî I promise I‚Äôll still be there in your lives when you need me.
          
          ‚ÄúYaamirukka Bayamen‚Ä¶ Karthik iruku Bayamen.‚Äù
          
          That‚Äôs my promise.
          
          If I hurt anyone knowingly or unknowingly this year, please forgive me. The fact that we‚Äôve come this far together itself is something beautiful. We didn‚Äôt just pass time ‚Äî we created memories worth carrying forward.
          
          I only wish one thing for all of you:
          always be happy, wherever life takes you.
        </div>
      </div>
    </div>
  </div>
</div>

<!-- PARTY POPUP WITH GOLDEN TICKET -->
<div class="popup-overlay" id="popupOverlay">
  <div class="confetti-popup" id="confettiPopup"></div>
  <div class="popup-container">
    <div class="close-popup" id="closePopup">√ó</div>
    <div class="golden-ticket">
      <div class="ticket-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#1a1a2e" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
          <!-- H or Gate Icon -->
          <line x1="8" y1="6" x2="8" y2="18" />
          <line x1="16" y1="6" x2="16" y2="18" />
          <line x1="8" y1="12" x2="16" y2="12" />
          <rect x="4" y="4" width="16" height="16" rx="2" fill="none" />
        </svg>
      </div>
      <h1 class="ticket-title">GOLDEN TICKET</h1>
      <div class="perforated-line"></div>
      <p class="ticket-validity">VALID FOR EVERY DAY AHEAD</p>
      <p class="ticket-quote">"Unlimited Love & Smiles"</p>
      <p class="ticket-expiration">No expiration date</p>
      <button class="claim-button" id="claimButton">CLAIM TICKET ></button>
    </div>
  </div>
</div>

<script>
/* HEART TAP AND HOLD ‚Üí OPEN CARD SCREEN */
const heart = document.getElementById("heart");
const intro = document.getElementById("intro");
const screen2 = document.getElementById("screen2");
const progressCircle = document.getElementById("progressCircle");

let isHolding = false;
let holdTimer = null;
let progressInterval = null;
let holdProgress = 0;
const holdDuration = 2000; // 2 seconds to hold
const circumference = 2 * Math.PI * 45; // radius is 45

// Set initial stroke-dasharray
if (progressCircle) {
  progressCircle.style.strokeDasharray = circumference;
  progressCircle.style.strokeDashoffset = circumference;
}

function startHold() {
  if (isHolding) return;
  
  isHolding = true;
  holdProgress = 0;
  heart.classList.add("holding");
  
  // Update progress circle
  if (progressCircle) {
    progressCircle.style.strokeDashoffset = circumference;
  }
  
  // Update progress every 50ms
  progressInterval = setInterval(() => {
    holdProgress += 50;
    const progress = (holdProgress / holdDuration) * 100;
    
    if (progressCircle) {
      const offset = circumference - (progress / 100) * circumference;
      progressCircle.style.strokeDashoffset = offset;
    }
    
    if (holdProgress >= holdDuration) {
      completeHold();
    }
  }, 50);
}

function stopHold() {
  if (!isHolding) return;
  
  isHolding = false;
  heart.classList.remove("holding");
  
  if (progressInterval) {
    clearInterval(progressInterval);
    progressInterval = null;
  }
  
  // Reset progress
  holdProgress = 0;
  if (progressCircle) {
    progressCircle.style.strokeDashoffset = circumference;
  }
  
  // Reset after a short delay
  setTimeout(() => {
    if (!isHolding) {
      heart.classList.remove("loading");
    }
  }, 300);
}

function completeHold() {
  stopHold();
  heart.classList.add("loading");
  heart.classList.remove("holding");
  
  // Keep progress ring visible and animate it
  if (progressCircle) {
    progressCircle.style.strokeDashoffset = 0;
  }
  
  setTimeout(() => {
    intro.classList.add("hide");
    screen2.classList.add("show");
    initializeCards();
    heart.classList.remove("loading");
    // Reset progress
    if (progressCircle) {
      progressCircle.style.strokeDashoffset = circumference;
    }
  }, 1200);
}

// Mouse events
heart.addEventListener("mousedown", (e) => {
  e.preventDefault();
  startHold();
});

document.addEventListener("mouseup", () => {
  stopHold();
});

document.addEventListener("mouseleave", () => {
  stopHold();
});

// Touch events
heart.addEventListener("touchstart", (e) => {
  e.preventDefault();
  startHold();
}, { passive: false });

document.addEventListener("touchend", () => {
  stopHold();
});

document.addEventListener("touchcancel", () => {
  stopHold();
});

// Prevent context menu on long press
heart.addEventListener("contextmenu", (e) => {
  e.preventDefault();
});

/* CARD DRAG AND DROP FUNCTIONALITY */
let draggedCard = null;
let dragOffset = { x: 0, y: 0 };
let cardBox = null;

function getCardPositions() {
  const width = window.innerWidth;
  
  // Define positions based on screen size
  if (width <= 480) {
    // Small mobile (240px card box)
    return {
      work: { x: 20, y: 120, rotate: -5 },
      stress: { x: 130, y: 20, rotate: 5 },
      distance: { x: 20, y: 20, rotate: -5 },
      bad: { x: 130, y: 120, rotate: 5 }
    };
  } else if (width <= 768) {
    // Tablet/Mobile (280px card box)
    return {
      work: { x: 25, y: 140, rotate: -5 },
      stress: { x: 155, y: 25, rotate: 5 },
      distance: { x: 25, y: 25, rotate: -5 },
      bad: { x: 155, y: 140, rotate: 5 }
    };
  } else {
    // Desktop (360px card box)
    return {
      work: { x: 40, y: 200, rotate: -5 },
      stress: { x: 200, y: 40, rotate: 5 },
      distance: { x: 40, y: 40, rotate: -5 },
      bad: { x: 200, y: 200, rotate: 5 }
    };
  }
}

function initializeCards() {
  cardBox = document.querySelector(".card-box");
  const cards = document.querySelectorAll(".card");
  const positions = getCardPositions();
  
  // Set initial positions based on screen size
  cards.forEach(card => {
    const type = card.dataset.type;
    if (positions[type]) {
      const pos = positions[type];
      updateCardPosition(card, pos.x, pos.y, pos.rotate);
      // Store in data attributes for dragging
      card.dataset.x = pos.x;
      card.dataset.y = pos.y;
      card.dataset.rotate = pos.rotate;
    }
  });
  
  // Add drag event listeners
  cards.forEach(card => {
    // Mouse events
    card.addEventListener("mousedown", startDrag);
    document.addEventListener("mousemove", drag);
    document.addEventListener("mouseup", stopDrag);
    
    // Touch events
    card.addEventListener("touchstart", startDragTouch, { passive: false });
    document.addEventListener("touchmove", dragTouch, { passive: false });
    document.addEventListener("touchend", stopDrag);
  });
  
  // Reinitialize on resize
  let resizeTimeout;
  window.addEventListener("resize", () => {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(() => {
      const positions = getCardPositions();
      cards.forEach(card => {
        const type = card.dataset.type;
        if (positions[type] && !card.classList.contains("dragging")) {
          const pos = positions[type];
          updateCardPosition(card, pos.x, pos.y, pos.rotate);
          card.dataset.x = pos.x;
          card.dataset.y = pos.y;
          card.dataset.rotate = pos.rotate;
        }
      });
    }, 250);
  });
}

function startDrag(e) {
  e.preventDefault();
  draggedCard = e.target.closest(".card");
  if (!draggedCard || !cardBox) return;
  
  draggedCard.classList.add("dragging");
}

function startDragTouch(e) {
  e.preventDefault();
  draggedCard = e.target.closest(".card");
  if (!draggedCard || !cardBox) return;
  
  draggedCard.classList.add("dragging");
}

function drag(e) {
  if (!draggedCard) return;
  e.preventDefault();
  
  const boxRect = cardBox.getBoundingClientRect();
  const cardWidth = draggedCard.offsetWidth;
  const cardHeight = draggedCard.offsetHeight;
  
  // Calculate position relative to card box center, then adjust
  const x = e.clientX - boxRect.left - cardWidth / 2;
  const y = e.clientY - boxRect.top - cardHeight / 2;
  
  // Constrain within card box
  const minX = 0;
  const minY = 0;
  const maxX = cardBox.offsetWidth - cardWidth;
  const maxY = cardBox.offsetHeight - cardHeight;
  
  const constrainedX = Math.max(minX, Math.min(maxX, x));
  const constrainedY = Math.max(minY, Math.min(maxY, y));
  
  updateCardPosition(draggedCard, constrainedX, constrainedY, 0);
}

function dragTouch(e) {
  if (!draggedCard) return;
  e.preventDefault();
  
  const touch = e.touches[0];
  const boxRect = cardBox.getBoundingClientRect();
  const cardWidth = draggedCard.offsetWidth;
  const cardHeight = draggedCard.offsetHeight;
  
  // Calculate position relative to card box
  const x = touch.clientX - boxRect.left - cardWidth / 2;
  const y = touch.clientY - boxRect.top - cardHeight / 2;
  
  // Constrain within card box
  const minX = 0;
  const minY = 0;
  const maxX = cardBox.offsetWidth - cardWidth;
  const maxY = cardBox.offsetHeight - cardHeight;
  
  const constrainedX = Math.max(minX, Math.min(maxX, x));
  const constrainedY = Math.max(minY, Math.min(maxY, y));
  
  updateCardPosition(draggedCard, constrainedX, constrainedY, 0);
}

function stopDrag(e) {
  if (!draggedCard) return;
  
  draggedCard.classList.remove("dragging");
  
  // Save new position to data attributes
  const transform = draggedCard.style.transform;
  const match = transform.match(/translate\(([\d.]+)px,\s*([\d.]+)px\)/);
  if (match) {
    draggedCard.dataset.x = match[1];
    draggedCard.dataset.y = match[2];
  }
  
  draggedCard = null;
  dragOffset = { x: 0, y: 0 };
}

function updateCardPosition(card, x, y, rotate = 0) {
  card.style.transform = `translate(${x}px, ${y}px) rotate(${rotate}deg)`;
}

/* ---------- GIFT CLICK ‚Üí PARTY POPUP ---------- */
const gift = document.getElementById("gift");
const popupOverlay = document.getElementById("popupOverlay");
const closePopup = document.getElementById("closePopup");
const claimButton = document.getElementById("claimButton");
const confettiPopup = document.getElementById("confettiPopup");

function createConfettiPieces() {
  const colors = ['#ffd700', '#ff6b6b', '#4ecdc4', '#ffe66d', '#a8e6cf'];
  const count = 50;
  
  for (let i = 0; i < count; i++) {
    const piece = document.createElement('div');
    piece.className = 'confetti-piece';
    piece.style.left = Math.random() * 100 + '%';
    piece.style.background = colors[Math.floor(Math.random() * colors.length)];
    piece.style.width = (Math.random() * 8 + 6) + 'px';
    piece.style.height = (Math.random() * 8 + 6) + 'px';
    piece.style.animationDelay = Math.random() * 2 + 's';
    piece.style.animationDuration = (Math.random() * 2 + 2) + 's';
    piece.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
    confettiPopup.appendChild(piece);
  }
  
  // Remove confetti after animation
  setTimeout(() => {
    confettiPopup.innerHTML = '';
  }, 5000);
}

gift.addEventListener("click", () => {
  popupOverlay.classList.add("show");
  createConfettiPieces();
  
  // Add party sound effect (optional - you can add audio file)
  // const audio = new Audio('party-sound.mp3');
  // audio.play();
});

closePopup.addEventListener("click", () => {
  popupOverlay.classList.remove("show");
  confettiPopup.innerHTML = '';
});

popupOverlay.addEventListener("click", (e) => {
  if (e.target === popupOverlay) {
    popupOverlay.classList.remove("show");
    confettiPopup.innerHTML = '';
  }
});

claimButton.addEventListener("click", () => {
  // Add celebration effect
  claimButton.textContent = "‚úì CLAIMED!";
  claimButton.style.background = "linear-gradient(135deg, #4ecdc4, #44a08d)";
  
  setTimeout(() => {
    // Close popup
    popupOverlay.classList.remove("show");
    confettiPopup.innerHTML = '';
    
    // Hide card screen if visible
    const screen2 = document.getElementById("screen2");
    if (screen2) {
      screen2.classList.remove("show");
    }
    
    // Reset button
    claimButton.textContent = "CLAIM TICKET >";
    claimButton.style.background = "linear-gradient(135deg, #ffd700, #ffed4e)";
    
    // Show moments screen immediately after popup closes (no delay)
    showMomentsScreen();
  }, 1500);
});

/* ---------- MOMENTS GALLERY FUNCTIONALITY ---------- */
const momentsScreen = document.getElementById("momentsScreen");
const momentsClose = document.getElementById("momentsClose");
const polaroidWrapper = document.getElementById("polaroidWrapper");
const currentPolaroid = document.getElementById("currentPolaroid");
const momentsCounter = document.getElementById("momentsCounter");

// Moments data - Add your photos and videos here
const moments = [
  {
    type: 'image',
    src: 'https://ik.imagekit.io/i2yzb4amqb/WhatsApp%20Image%202025-12-31%20at%2018.32.11%20(2).jpeg',
    alt: 'Beautiful moment 1'
  },
  {
    type: 'image',
    src: 'https://ik.imagekit.io/i2yzb4amqb/WhatsApp%20Image%202025-12-31%20at%2018.32.06.jpeg',
    alt: 'Special moment 2'
  },
  
  {
    type: 'image',
    src: 'https://ik.imagekit.io/i2yzb4amqb/WhatsApp%20Image%202025-12-31%20at%2018.36.04.jpeg',
    alt: 'Adventure moment 4'
  },
  {
    type: 'image',
    src: 'https://ik.imagekit.io/i2yzb4amqb/WhatsApp%20Image%202025-12-31%20at%2018.32.11.jpeg',
    alt: 'Nature moment 5'
  },
  {
    type: 'image',
    src: 'https://ik.imagekit.io/i2yzb4amqb/WhatsApp%20Image%202025-12-31%20at%2018.32.09.jpeg',
    alt: 'Sunset moment 6'
  },
  {
    type: 'image',
    src: 'https://ik.imagekit.io/i2yzb4amqb/WhatsApp%20Image%202025-12-31%20at%2018.32.09%20(1).jpeg',
    alt: 'Mountain moment 7'
  },
  {
    type: 'image',
    src: 'https://ik.imagekit.io/i2yzb4amqb/WhatsApp%20Image%202025-12-31%20at%2018.36.03.jpeg',
    alt: 'Evening moment 9'
  },
  {
    type: 'image',
    src: 'https://ik.imagekit.io/i2yzb4amqb/WhatsApp%20Image%202025-12-31%20at%2018.36.03%20(1).jpeg',
    alt: 'Final moment 10'
  },
  {
    type: 'image',
    src: 'https://ik.imagekit.io/i2yzb4amqb/WhatsApp%20Image%202025-12-31%20at%2018.36.04%20(1).jpeg',
    alt: 'Final moment 10'
  },
  {
    type: 'image',
    src: 'https://ik.imagekit.io/i2yzb4amqb/WhatsApp%20Image%202025-12-31%20at%2018.32.08.jpeg',
    alt: 'Final moment 10'
  },
  {
    type: 'image',
    src: 'https://ik.imagekit.io/i2yzb4amqb/WhatsApp%20Image%202025-12-31%20at%2018.32.08%20(1).jpeg',
    alt: 'Final moment 10'
  },
  {
    type: 'image',
    src: 'https://ik.imagekit.io/i2yzb4amqb/WhatsApp%20Image%202025-12-31%20at%2018.32.10.jpeg',
    alt: 'Final moment 10'
  },
  {
    type: 'image',
    src: 'https://ik.imagekit.io/i2yzb4amqb/WhatsApp%20Image%202025-12-31%20at%2018.32.10%20(1).jpeg',
    alt: 'Final moment 10'
  },
  {
    type: 'image',
    src: 'https://ik.imagekit.io/i2yzb4amqb/WhatsApp%20Image%202025-12-31%20at%2018.32.10%20(2).jpeg',
    alt: 'Final moment 10'
  },
  {
    type: 'image',
    src: 'https://ik.imagekit.io/i2yzb4amqb/WhatsApp%20Image%202025-12-31%20at%2018.36.03%20(2).jpeg',
    alt: 'Final moment 10'
  },
  {
    type: 'image',
    src: 'https://ik.imagekit.io/i2yzb4amqb/WhatsApp%20Image%202025-12-31%20at%2018.32.11%20(1).jpeg',
    alt: 'Final moment 10'
  }



];

let currentMomentIndex = 0;

function showMomentsScreen() {
  // Hide card section if it's visible
  const screen2 = document.getElementById("screen2");
  if (screen2 && screen2.classList.contains("show")) {
    screen2.classList.remove("show");
  }
  
  // Show moments screen immediately
  momentsScreen.classList.add("show");
  loadMoment(0);
}

function loadMoment(index) {
  if (index < 0 || index >= moments.length) return;
  
  currentMomentIndex = index;
  const moment = moments[index];
  
  // Update counter
  momentsCounter.textContent = `${index + 1} / ${moments.length}`;
  
  // Clear current content
  currentPolaroid.innerHTML = '';
  
  // Add fade animation
  currentPolaroid.classList.add('moments-fade-exit');
  
  setTimeout(() => {
    currentPolaroid.classList.remove('moments-fade-exit');
    currentPolaroid.classList.add('moments-fade-enter');
    
    // Create media element
    let mediaElement;
    if (moment.type === 'video') {
      mediaElement = document.createElement('video');
      mediaElement.className = 'polaroid-video';
      mediaElement.src = moment.src;
      mediaElement.poster = moment.poster || '';
      mediaElement.controls = false;
      mediaElement.autoplay = true;
      mediaElement.loop = true;
      mediaElement.muted = true;
      mediaElement.playsInline = true;
    } else {
      mediaElement = document.createElement('img');
      mediaElement.className = 'polaroid-image';
      mediaElement.src = moment.src;
      mediaElement.alt = moment.alt || 'Moment';
    }
    
    // Add caption
    const caption = document.createElement('div');
    caption.className = 'polaroid-caption';
    caption.innerHTML = `
      <div class="caption-line"></div>
      <div class="caption-line"></div>
      <div class="caption-line"></div>
    `;
    
    currentPolaroid.appendChild(mediaElement);
    currentPolaroid.appendChild(caption);
    
    setTimeout(() => {
      currentPolaroid.classList.remove('moments-fade-enter');
    }, 500);
  }, 250);
}

function nextMoment() {
  if (currentMomentIndex < moments.length - 1) {
    loadMoment(currentMomentIndex + 1);
  } else {
    // All moments viewed - show greeting card
    showGreetingCard();
  }
}

// Click on polaroid to go to next moment
polaroidWrapper.addEventListener("click", () => {
  nextMoment();
});

// Close moments screen - goes back to card section
momentsClose.addEventListener("click", () => {
  momentsScreen.classList.remove("show");
  currentMomentIndex = 0;
  // Optionally go back to card section
  // screen2.classList.add("show");
});

momentsScreen.addEventListener("click", (e) => {
  if (e.target === momentsScreen) {
    momentsScreen.classList.remove("show");
    currentMomentIndex = 0;
  }
});

// Keyboard navigation
document.addEventListener("keydown", (e) => {
  if (momentsScreen.classList.contains("show")) {
    if (e.key === "ArrowRight" || e.key === " ") {
      e.preventDefault();
      nextMoment();
    } else if (e.key === "Escape") {
      momentsScreen.classList.remove("show");
      currentMomentIndex = 0;
    }
  }
});

/* ---------- GREETING CARD FUNCTIONALITY ---------- */
const greetingCardScreen = document.getElementById("greetingCardScreen");
const greetingCard = document.getElementById("greetingCard");
const cardClose = document.getElementById("cardClose");
const greetingTitle = document.getElementById("greetingTitle");
const cardMessage = document.getElementById("cardMessage");

function showGreetingCard() {
  // Hide moments screen
  momentsScreen.classList.remove("show");
  currentMomentIndex = 0;
  
  // Show greeting card screen
  setTimeout(() => {
    greetingCardScreen.classList.add("show");
  }, 500);
}

// Flip card on click
greetingCard.addEventListener("click", () => {
  greetingCard.classList.toggle("flipped");
});

// Close greeting card
cardClose.addEventListener("click", () => {
  greetingCardScreen.classList.remove("show");
  greetingCard.classList.remove("flipped");
});

greetingCardScreen.addEventListener("click", (e) => {
  if (e.target === greetingCardScreen) {
    greetingCardScreen.classList.remove("show");
    greetingCard.classList.remove("flipped");
  }
});

// Keyboard support
document.addEventListener("keydown", (e) => {
  if (greetingCardScreen.classList.contains("show")) {
    if (e.key === " " || e.key === "Enter") {
      e.preventDefault();
      greetingCard.classList.toggle("flipped");
    } else if (e.key === "Escape") {
      greetingCardScreen.classList.remove("show");
      greetingCard.classList.remove("flipped");
    }
  }
});
</script>

</body>
</html>
